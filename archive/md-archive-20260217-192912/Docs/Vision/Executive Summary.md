تعريف النظام (System Definition)
الاسم

Theme Runtime Interpretation & Simulation System

التعريف

هو نظام برمجي يعمل كمحرك تفسير وتشغيل، يقوم بقراءة ملفات الثيمات كما هي معرّفة في منصة سلة، ثم يفسّر عقودها وإصداراتها ومكوناتها وسلوكها، ويحوّلها إلى حالة تشغيل كاملة قابلة للتركيب، المعاينة، الاختبار، والتحقق، مع إنتاج ناتج مطابق تمامًا لما سيحدث عند تشغيل الثيم داخل منصة سلة.

جوهر النظام

النظام لا يعرّف مفاهيم خارجية ولا يفرض نماذج سلوكية إضافية، بل يعتمد على ملفات الثيم نفسها كمصدر وحيد للحقيقة، ويعيد بناء بيئة تشغيل مكافئة لبيئة سلة اعتمادًا على ما هو معرّف صراحة أو ضمنًا داخل هذه الملفات.

ما الذي يتعامل معه النظام

يتعامل النظام مع الثيم بوصفه كيان تشغيل متكامل يحتوي على:

تعريف الهوية

تعريف الإصدار

تعريف المكونات

تعريف الإعدادات

تعريف القيود والسلوك

تعريف نقاط التفاعل (hooks)

تعريف التوافق

ويتعامل مع كل إصدار من الثيم كحالة تشغيل مستقلة كاملة.

الوظيفة الأساسية

الوظيفة الأساسية للنظام هي:

تحويل ملفات ثيم سلة إلى نموذج تشغيل فعلي (Runtime Model)، ثم تشغيل هذا النموذج عبر سيناريوهات تركيب مختلفة لإنتاج Context مطابق لسلوك المنصة.

الدور المعماري

يقع النظام منطقيًا بين:

ملفات الثيم الخام

وبيئة التشغيل الفعلية للمنصة

ويعمل كطبقة تفسير وتشغيل، وليس كطبقة تصميم أو تعديل.

ناتج النظام

النظام ينتج:

نموذج تشغيل للثيم

سياق عرض (Context) جاهز

معاينة حية مطابقة

نتائج تحقق واختبار

حزمة ثيم جاهزة للتسليم

كل ناتج مرتبط بإصدار محدد من الثيم.

طريقة العمل المفاهيمية

قراءة ملفات الثيم

تفسير العقد والتعريفات

بناء نموذج تشغيل داخلي

تركيب السيناريوهات الممكنة

توليد سياق عرض

تشغيل المعاينة

تنفيذ اختبارات تشغيل

التحقق من الجاهزية

إخراج الثيم كما هو

علاقة النظام بالثيم

الثيم هو المدخل

الإصدار جزء من الثيم

السلوك معرّف داخل الثيم

النظام لا يغير الثيم

النظام لا يضيف سلوكًا

النظام لا يعيد تعريف القيود

علاقة النظام بالمعاينة

المعاينة هي تشغيل فعلي لنموذج الثيم باستخدام سياق مولّد، وليست محاكاة تقديرية أو تقريبية.

علاقة النظام بالتصدير

التصدير هو عملية تسليم مباشرة لملفات الثيم بعد التحقق، دون تحويل أو إعادة بناء.

الهدف النهائي للنظام

تمكين العمل على الثيمات، اختبارها، وفهم سلوكها بدقة خارج منصة سلة، مع ضمان أن أي نتيجة تظهر داخل النظام هي نتيجة متطابقة لما سيحدث داخل المنصة نفسها.

الجملة التعريفية الحاسمة

هذا النظام هو بيئة تشغيل وتفسير لثيمات سلة،
وليس أداة تصميم، ولا محرر ثيمات، ولا بديلًا عن المنصة.

منطق العمل في واجهة النظام (UI Workflow Logic)
الهدف العام للواجهة

تمكين المستخدم من تشغيل، معاينة، اختبار، والتحقق من ثيمات سلة اعتمادًا على ملفاتها وإصداراتها، عبر مسار عمل واحد متسق وقابل للتكرار.

1. نقطة الدخول (Entry Point)

عند فتح الواجهة:

يتم عرض قائمة الثيمات المتاحة (كما هي موجودة في المستودع).

لكل ثيم تظهر:

الهوية

الإصدار المستخلص من الملفات

حالة التشغيل الحالية (جاهز، قيد المعالجة، نتائج متاحة).

2. اختيار الثيم والإصدار

يختار المستخدم ثيمًا.

يختار إصدارًا محددًا من الإصدار/الإصدارات المتاحة داخل ملفات الثيم.

يتم تحميل Theme Runtime Model الخاص بهذا الإصدار.

هذه الخطوة تحدد سياق العمل الكامل لاحقًا.

3. لوحة التشغيل (Runtime Workspace)

بعد اختيار الإصدار، تنتقل الواجهة إلى مساحة عمل موحّدة تتكوّن من:

أ) شجرة التركيب (Composition Tree)

عرض الكومبوننتات المعرّفة في عقد الثيم.

تمثيل العلاقات والترتيب.

إظهار الأجزاء الداخلية لكل كومبوننت كما هي معرّفة.

ب) لوحة الإعدادات (Settings Panel)

عرض إعدادات الثيم المتاحة لهذا الإصدار.

عرض إعدادات الكومبوننتات.

تحديث القيم مباشرة في نموذج التشغيل.

ج) محدد النية (Intent Selector)

اختيار نمط التركيب أو العرض عالي المستوى.

تحديد سيناريو التشغيل المراد معاينته.

4. بناء التركيب (Composition Build)

عند أي تغيير في:

ترتيب الكومبوننتات

الإعدادات

النية المختارة

تقوم الواجهة بـ:

إرسال التغييرات إلى محرك التركيب.

طلب إعادة بناء نموذج التشغيل.

استلام Context محدث.

5. المعاينة الحية (Live Preview)

يتم تمرير Context إلى طبقة المعاينة.

عرض الثيم باستخدام ملفات العرض الفعلية.

تحديث المعاينة فورًا مع كل تغيير.

المعاينة:

تعكس السلوك الفعلي

تعرض الأجزاء الداخلية النشطة

تظهر اختلاف السلوك حسب الإصدار

6. تشغيل السيناريوهات (Simulation Control)

من الواجهة يمكن:

اختيار سيناريو تشغيل

تفعيل حالات بيانات مختلفة

التنقل بين حالات تشغيل متعددة

كل اختيار:

يولّد Context جديد

يُعاد عرضه فورًا

7. لوحة النتائج (Results Panel)

تعرض الواجهة:

نتائج التحقق

ملاحظات التشغيل

حالات الجاهزية

مؤشرات التوافق

النتائج مرتبطة مباشرة:

بالإصدار

وبالتركيب الحالي

8. إدارة اللقطات (Snapshots)

يمكن للمستخدم:

حفظ حالة تشغيل كاملة

الرجوع إلى حالة سابقة

مقارنة حالات مختلفة

كل Snapshot يمثل:

إصدارًا

إعدادات

نية

Context كامل

9. الجاهزية والتصدير

عند اكتمال التشغيل:

تعرض الواجهة حالة الجاهزية.

تتيح بدء عملية التصدير.

تُظهر ناتج التصدير المرتبط بهذا الإصدار.

10. التنقل والاستمرارية

الواجهة تحفظ حالة العمل.

تتيح العودة لأي إصدار أو تركيب.

تدعم العمل المتوازي على إصدارات متعددة.

منطق الواجهة باختصار (سطر واحد)

الواجهة لا تقرر السلوك،
بل تدير اختيار السياق،
وتعرض ناتج تشغيله كما هو.

العلاقة بين الواجهة وباقي النظام

الواجهة تتعامل مع نماذج تشغيل لا ملفات خام.

كل إجراء في الواجهة يقابل عملية تشغيل محددة في المحرك.

لا يوجد إجراء بصري دون مقابل تشغيلي.

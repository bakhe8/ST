# Store Events Tracking Contract

تاريخ: 2026-02-14
المصدر: https://github.com/SallaApp/store-events-tracker-starter-kit
الغرض: توحيد قواعد تتبع أحداث المتجر في منصة تطوير الثيمات VTDR

---

## 1) تعريف الدور

تتبع أحداث المتجر (Store Events Tracking) هو آلية لرصد وتحليل تفاعل المستخدم مع المتجر والثيم، مثل:
- عمليات الشراء
- تصفح المنتجات
- إضافة للسلة
- تسجيل الدخول/الخروج

في منصة VTDR:
- يجب أن تدعم المعاينة توليد/محاكاة هذه الأحداث.
- يجب أن تلتزم الثيمات بنمط التتبع الرسمي لسلة (كما في starter kit).

---

## 2) قواعد دمج التتبع

1. استخدام واجهات Salla الرسمية (Storefront APIs أو JS SDK) لتتبع الأحداث.
2. عدم تعديل أو تجاوز نمط التتبع الرسمي (event payload, naming, triggers).
3. في المعاينة: يجب توفير سيناريوهات تولد الأحداث تلقائيًا لاختبار استجابة الثيم.
4. في الثيم: يجب أن يكون الكود الخاص بالتتبع معزولًا وقابلًا للتفعيل/التعطيل.

---

## 3) سيناريوهات اختبار/معاينة

- معاينة تفاعل المستخدم مع المنتج (view, add-to-cart, purchase).
- معاينة تفاعل المستخدم مع الحساب (login, logout).
- معاينة تفاعل المستخدم مع البحث والتصفية.

> يجب أن تظهر نتائج التتبع في سجل الأحداث داخل المنصة.

---

## 4) متطلبات التوافق (PASS/WARNING/FAIL)

- PASS: الثيم يدعم تتبع الأحداث بنمط سلة الرسمي، والمعاينة تولد الأحداث وتعرضها.
- WARNING: الثيم يدعم التتبع جزئيًا أو بنمط غير رسمي.
- FAIL: الثيم لا يدعم تتبع الأحداث أو يتجاهل نمط سلة.

---

## 5) ملاحظات عملية

- يمكن استخدام starter kit كمرجع أو نقطة انطلاق لتطوير وحدات التتبع.
- يجب تحديث العقد عند أي تغيير رسمي في نمط تتبع الأحداث من سلة.

---

> هذا العقد جزء من Docs/Documentation-Alignment-Map.md ويجب فحصه في كل عملية preflight.
